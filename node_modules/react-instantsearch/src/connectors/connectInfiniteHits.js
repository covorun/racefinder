'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _createConnector=require('../core/createConnector'),_createConnector2=_interopRequireDefault(_createConnector),_indexUtils=require('../core/indexUtils');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function getId(){return'page'}function getCurrentRefinement(a,b,c){var d=getId();return(0,_indexUtils.getCurrentRefinementValue)(a,b,c,d,1,function(f){return'string'==typeof f&&(f=parseInt(f,10)),f})}exports.default=(0,_createConnector2.default)({displayName:'AlgoliaInfiniteHits',getProvidedProps:function getProvidedProps(a,b,c){var d=(0,_indexUtils.getResults)(c,this.context);if(!d)return this._allResults=[],{hits:this._allResults,hasMore:!1};var e=d.hits,f=d.page,g=d.nbPages;0===f?this._allResults=e:f>this.previousPage?this._allResults=[].concat(_toConsumableArray(this._allResults),_toConsumableArray(e)):f<this.previousPage&&(this._allResults=e);return this.previousPage=f,{hits:this._allResults,hasMore:f<g-1}},getSearchParameters:function getSearchParameters(a,b,c){return a.setQueryParameters({page:getCurrentRefinement(b,c,this.context)-1})},refine:function refine(a,b){var c=getId(),d=getCurrentRefinement(a,b,this.context)+1,e=_defineProperty({},c,d);return(0,_indexUtils.refineValue)(b,e,this.context,!1)}});