import _get from'lodash/get';import _omit from'lodash/omit';import _has from'lodash/has';var _extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a};function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}export function getIndex(a){return a&&a.multiIndexContext?a.multiIndexContext.targetedIndex:a.ais.mainTargetedIndex}export function getResults(a,b){return a.results&&!a.results.hits?a.results[getIndex(b)]?a.results[getIndex(b)]:null:a.results?a.results:null}export function hasMultipleIndex(a){return a&&a.multiIndexContext}export function refineValue(a,b,c,d,e){return hasMultipleIndex(c)?e?refineMultiIndexWithNamespace(a,b,c,d,e):refineMultiIndex(a,b,c,d):e?refineSingleIndexWithNamespace(a,b,d,e):refineSingleIndex(a,b,d)}function refineMultiIndex(a,b,c,d){var e=d?{page:1}:void 0,f=getIndex(c),g=_has(a,'indices.'+f)?_extends({},a.indices,_defineProperty({},f,_extends({},a.indices[f],b,e))):_extends({},a.indices,_defineProperty({},f,_extends({},b,e)));return _extends({},a,{indices:g})}function refineSingleIndex(a,b,c){var d=c?{page:1}:void 0;return _extends({},a,b,d)}function refineMultiIndexWithNamespace(a,b,c,d,e){var f,g=getIndex(c),h=d?{page:1}:void 0,j=_has(a,'indices.'+g)?_extends({},a.indices,_defineProperty({},g,_extends({},a.indices[g],(f={},_defineProperty(f,e,_extends({},a.indices[g][e],b)),_defineProperty(f,'page',1),f)))):_extends({},a.indices,_defineProperty({},g,_extends(_defineProperty({},e,b),h)));return _extends({},a,{indices:j})}function refineSingleIndexWithNamespace(a,b,c,d){var e=c?{page:1}:void 0;return _extends({},a,_defineProperty({},d,_extends({},a[d],b)),e)}function getNamespaceAndAttributeName(a){var b=a.match(/^([^.]*)\.(.*)/),c=b&&b[1],d=b&&b[2];return{namespace:c,attributeName:d}}export function getCurrentRefinementValue(a,b,c,d,e,f){var g=getIndex(c),h=getNamespaceAndAttributeName(d),j=h.namespace,k=h.attributeName,l=hasMultipleIndex(c)&&b.indices&&j&&b.indices[''+g]&&_has(b.indices[''+g][j],''+k)||hasMultipleIndex(c)&&b.indices&&_has(b,'indices.'+g+'.'+d)||!hasMultipleIndex(c)&&j&&_has(b[j],k)||!hasMultipleIndex(c)&&_has(b,d);if(l){var m;return m=hasMultipleIndex(c)?j?_get(b.indices[''+g][j],k):_get(b.indices[g],d):j?_get(b[j],k):_get(b,d),f(m)}return a.defaultRefinement?a.defaultRefinement:e}export function cleanUpValue(a,b,c){var d=getIndex(b),e=getNamespaceAndAttributeName(c),f=e.namespace,g=e.attributeName;return hasMultipleIndex(b)?f?_extends({},a,{indices:_extends({},a.indices,_defineProperty({},d,_extends({},a.indices[d],_defineProperty({},f,_omit(a.indices[d][f],''+g)))))}):_omit(a,'indices.'+d+'.'+c):f?_extends({},a,_defineProperty({},f,_omit(a[f],''+g))):_omit(a,''+c)}